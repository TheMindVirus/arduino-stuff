#include <Ethernet.h>

#define Server_localIP() Ethernet.localIP()
#define Server_localPort() 80 //DNS?
#define Server_remoteIP() Client.remoteIP()
#define Server_remotePort() Client.localPort()

#define Server_Idle            0
#define Server_RenewError      1
#define Server_RenewSuccess    2
#define Server_RebindError     3
#define Server_RebindSuccess   4
#define Server_InitSuccess     5

int status = Server_Idle;
byte MAC[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
//IPAddress IP = { 192, 168, 1, 177 }; //DHCP?
EthernetServer Server(Server_localPort());
//EthernetClient Client();
bool BlankLine = true;
char TempChar = '\0';
bool OneShot = true;

const char Server_Data[] PROGMEM = 
"\
<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1190.6 878.7\" style=\"position: absolute; top: 240px; left: -5px; transform: scale(2); background: #113\">\r\n\
<g id=\"Elizabeth\" fill=\"none\" stroke=\"#7700FF\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M1002.9,135.1l-260,260,c0,0,-3,3,-6,3l-50,0c0,0,-3,0,-6,-3,l-15,-15,c0,0,-3,-3,-6,-3,l-100,0,c0,0,-3,0,-6,3,l-25,25,c0,0,-3,3,-6,3,l-100,0,c0,0,-3,0,-6,-3,l-30,-30,c0,0,-3,-3,-6,-3,l-100,0,c0,0,-3,0,-6,3,l-46,46,c0,0,-3,3,-6,3,l-69,0\"/>\r\n\
  <path d=\"M82.7,599.7V434.6c0-2.8,1.1-5.4,3-7.3l0.1-0.1c2-2,4.6-3,7.3-3c2.7,0,60.3,0,60.3,0\"/>\r\n\
  <path d=\"M43.4,287.1v126.7c0,2.8,1.1,5.4,3,7.3l0.1,0.1c2,2,4.6,3,7.3,3c2.7,0,43,0,43,0\"/>\r\n\
  <path d=\"M59,608.6l0-17.6c0-2.1,0.8-4.1,2.4-5.7c9.5-9.5,13.8-13.8,18.9-18.9c1.5-1.5,2.4-3.5,2.4-5.7\"/>\r\n\
  <path d=\"M735,398,c0,0,6,0,6,6,l0,85,c0,0,0,6,6,6,l30,0,c0,0,3,0,6,-3,l15,-15,c0,0,3,-3,6,-3,l105,0,c0,0,3,0,6,3,l80,80\"/>\r\n\
</g>\r\n\
<g id=\"Thameslink\" fill=\"none\" stroke=\"#EEBB77\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M635,599.2 l-10.4,10.5c-1.6,1.6-2.8,2-5,2h-17\"/>\r\n\
  <path d=\"M561.8,427.5c0,2.2-1.3,5.2-2.8,6.7l-11,11c-1.5,1.5-2.8,4.6-2.8,6.8v2.3c0,2.2,1.3,5.2,2.8,6.8c1.9,1.9,31.6,31.6,31.6,31.6\"/>\r\n\
  <path d=\"M441.7,705h62.5 M519.5,746.1v22.6M502.1,776.6l-117.4,0c-2.2,0-5.2-1.2-6.7-2.8M378,773.8L324.3,720c-1.5-1.5-2.8-4.5-2.8-6.7M441.8,705c-2.2,0-5.2-1.3-6.7-2.8L362.7,630c-1.5-1.5-4.6-2.8-6.8-2.8h-5.8\"/>\r\n\
  <path d=\"M545.8,353.6v22.9c0,2.2,1.3,5.2,2.8,6.8c1.9,1.9,5.4,5.4,5.4,5.4\"/>\r\n\
  <path d=\"M561.8,427.6v-27.2c0-2.2-1.3-5.2-2.8-6.8c-1.9-1.9-5-5-5-5\"/>\r\n\
  <path d=\"M432.3,199.6c0,2.2-1.3,5.2-2.8,6.7l-23.3,23.3c-1.5,1.5-2.8,4.6-2.8,6.8v15.3\"/>\r\n\
  <path d=\"M418.7,112.5v59.9c0,2.2,1.3,5.2,2.8,6.8c1.9,1.9,7.2,7.2,7.2,7.2\"/>\r\n\
  <path d=\"M432.3,199.7v-5.8c0-2.2-1.3-5.2-2.8-6.8c-1.9-1.9-6.2-6.2-6.2-6.2\"/>\r\n\
  <path d=\"M588.1,508.5c0,2.2-1.3,5.2-2.9,6.7l-60.5,60.6\"/>\r\n\
  <path d=\"M519.5,585.1c0-2.2,1.3-5.2,2.9-6.7l2.7-2.8\"/>\r\n\
  <path d=\"M745.7,720.6l0-24.7c0-2.2-1.3-5.2-2.8-6.8l-4.8-4.8c-1.5-1.5-4.6-2.8-6.8-2.8c-2.7,0-35.3,0-35.3,0 M648.8,753.8l-3.5,0c-2.2,0-5.2,1.3-6.8,2.8l-0.7,0.7c-1.5,1.5-2.8,4.6-2.8,6.8c0,2.7,0,14.2,0,14.2 M647.6,753.8l87.9,0c2.2,0,5.2-1.3,6.8-2.8l0.7-0.7c1.5-1.5,2.8-4.6,2.8-6.8c0-2.7,0-45.5,0-45.5M631.1,598.3l0-22c0-2.2-1.3-5.2-2.8-6.8l-8.3-8.3\"/>\r\n\
  <path d=\"M614.6,527.8c-1.9-1.9-19.6-19.7-30.1-30.1\"/>\r\n\
  <path d=\"M730.2,581.2l-13.5-13.9c-1.5-1.5-4.6-2.8-6.8-2.8c-2.7,0-81.1,0-81.1,0M631.1,587c0,0,0,55.1,0,57.9c0,2.2,1.3,5.2,2.8,6.8l4.8,4.8c1.5,1.5,4.6,2.8,6.8,2.8l18.9,0c2.2,0,3.5,1.2,5.1,2.8 M355,627.2c0,0-2.1,0-4.9,0c-2.2,0-5.2,1.3-6.8,2.8l-19.1,19.1c-1.5,1.5-2.8,4.6-2.8,6.8l0,5.2 M519.5,585c0,93.2,0,159.3,0,161.4 M686.1,678.9c-1.9-1.9-6.9-7-17.4-17.4 M701.9,681.5l-9.3-0.1c-2.2,0-5.1-1.2-6.6-2.8 M707.6,596.9c1.9,1.9,23.9,24,34.4,34.4M697.9,594.3l3.2,0c2.2,0,5.1,1.2,6.6,2.8M631.1,588.4v9.6\"/>\r\n\
  <path d=\"M811,583.9l-74.3-0.1c-2.2,0-5.1-1.2-6.6-2.7\"/>\r\n\
  <path d=\"M789.8,634.1l-41.4-0.1c-2.2,0-5.1-1.2-6.6-2.7\"/>\r\n\
  <path d=\"M477.4,262.5c0,0,10.4-10.3,12.3-12.2c1.5-1.5,4.6-2.8,6.8-2.8h22.9c2.2,0,5.2,1.3,6.8,2.8M438.5,270.1c0,0,0.6-0.5,1.5-1.5c1.4-1.4,4.6-2.8,6.8-2.8H470M431.1,273.6h-19.9M526,250.1l33.2,33.1c1.5,1.5,2.8,4.6,2.8,6.8v31.9M431.1,273.6c2.2,0,5.2-1.3,6.8-2.8l0.8-0.7M469.9,265.9c2.2,0,5.4-1.3,6.9-2.8l0.8-0.7M581.8,264.5c0,0,2.5-2.4,4.4-4.4c1.5-1.5,4.6-2.8,6.8-2.8h1.9M562,297.7c0,0,0-6.8,0-9.5c0-2.2,1.3-5.2,2.8-6.8l21.5-21.4M606.6,223.9c0,0-2.5-2.5-4.5-4.4c-1.5-1.5-2.8-4.6-2.8-6.8V112.1\"/>\r\n\
  <path d=\"M519.5,696.5c0,2.3-0.9,4.5-2.4,6c-1.5,1.5-3.7,2.5-6,2.5h-11\"/>\r\n\
  <path d=\"M519.5,768.1c0,2.3-0.9,4.5-2.4,6c-1.5,1.5-3.7,2.5-6,2.5h-11\"/>\r\n\
  <path d=\"M519.5,603.2c0,2.3,0.9,4.5,2.4,6c1.5,1.5,3.7,2.5,6,2.5h81.2\"/>\r\n\
  <path d=\"M635,599.2l2.8-2.9c1.6-1.6,2.8-2,5-2h57.4\"/>\r\n\
  <path d=\"M833.4,604.9l-27.1,27.2c-1.6,1.6-2.8,2-5,2h-19.7\"/>\r\n\
  <path d=\"M832.3,606.1l3.2-3.3c1.6-1.6,2.8-2,5-2h174.7\"/>\r\n\
  <path d=\"M914,600.8l4.6,0c2.3,0,3.4,0.6,4.9,2.1l18.6,18.6\"/>\r\n\
  <path d=\"M829.4,578.4l-3.4,3.5c-1.6,1.6-2.8,2-5,2h-20.2\"/>\r\n\
  <path d=\"M828.9,578.9l4.3-4.4c1.6-1.6,2.8-2,5-2h129.3h47.7\"/>\r\n\
  <path d=\"M403.4,265c0,2.3,0.9,4.5,2.4,6c1.5,1.5,3.7,2.5,6,2.5l1.4,0\"/>\r\n\
  <path d=\"M617.3,246.8l0-7.5v-0.7c0-2.5-1-5-2.6-6.6L602,219.3\"/>\r\n\
  <path d=\"M588.1,508.6v-3.4c0-2.2-1.1-5.1-2.7-6.7c-1.9-1.9-9.8-9.8-20.2-20.3\"/>\r\n\
  <path d=\"M620,561.3c-1.5-1.5-2.7-4.6-2.7-6.8l-0.1-9.5\"/>\r\n\
  <path d=\"M614.4,527.7c1.5,1.5,2.7,4.6,2.7,6.8l0.1,12.3\"/>\r\n\
  <path d=\"M620,561.3l0.4,0.4c1.5,1.5,4.4,2.8,6.6,2.8c2.7,0,17.3,0,32.1,0\"/>\r\n\
  <path d=\"M552.2,336.4c0,0-1.6,1.6-3.6,3.6c-1.5,1.5-2.8,4.6-2.8,6.8l0,27.4\"/>\r\n\
  <path d=\"M562,314.2v8.5c0,2.2-1.3,5.2-2.8,6.8c-1.9,1.9-8.2,8.3-8.2,8.3\"/>\r\n\
  <path d=\"M617.3,246.6c0,5.9-4.8,10.7-10.7,10.7c-12.6,0,0.7,0-12.2,0\"/>\r\n\
</g>\r\n\
<g id=\"Tramlink\" fill=\"none\" stroke=\"#80BA27\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M791.1,734.4c2.2,0,4.2,0.9,5.7,2.4l33.8,33.8c0.8,0.8,1.7,1.4,2.7,1.8c1,0.4,2,0.6,3,0.6h90.5\"/>\r\n\
  <path d=\"M979.6,662.3l-109.8,0c-2.2,0-4.2,0.9-5.7,2.4L796.8,732c-1.6,1.6-3.6,2.4-5.7,2.4l0,0\"/>\r\n\
  <path d=\"M871.8,683.6l-23.3,0c-2.2,0-4.2,0.9-5.7,2.4\"/>\r\n\
  <path d=\"M677.3,734.3H392.6c-2.4,0-5.3-1-7-2.7l-32.8-32.8c-1.3-1.3-2.3-3.8-2.3-5.7v-57\"/>\r\n\
  <path d=\"M646.3,734.3c1.8,0,4.4-1.1,5.7-2.3c1.1-1.1,16.2-16.2,16.2-16.2\"/>\r\n\
  <path d=\"M748.4,734.4c-5.9,0-10.7-4.8-10.7-10.7c0-5.9-4.8-10.7-10.7-10.7h-51.6c-5.9,0-10.7,4.8-10.7,10.7c0,5.9,4.8,10.7,10.7,10.7c3.9,0,115.7,0,115.7,0\"/>\r\n\
</g>\r\n\
<g id=\"Overground\" fill=\"none\" stroke=\"#FFCCCC\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M380.9,606.6c0,0,0-16,0-18.7c0-1.8-1-5.2-2.3-6.5l-45.7-45.7c-1.3-1.3-2.3-3.8-2.3-5.6v-69.3c0-1.8-1-4.3-2.2-5.5l-82.5-82.5c-1.7-1.7-2.3-4.4-2.3-6.7l0.1-26.7c0-1.8,1.1-4.3,2.3-5.6\"/>\r\n\
  <path d=\"M821.8,315.5H705.5c-1.8,0-4.3-1-5.6-2.3l-6.9-7c-1.8-1.8-4.3-2.9-7-2.9H543.2c-1.8,0-4.3-1-5.6-2.3l-16.5-16.5c-1.3-1.3-3.8-2.3-5.6-2.3H382.4c-1.8,0-4.3,1-5.6,2.3l-7.6,7.6c-1.3,1.3-3.8,2.3-5.6,2.3h-75c-1.8,0-4.3,1-5.6,2.3l-51.3,51.3c-1.3,1.3-2.3,3.8-2.3,5.6v121.2c0,1.8-1,4.3-2.3,5.6l-18.7,18.7l0,0c-1.9,1.9-3.1,4.5-3.1,7.4c0,3.1,0,73.7,0,73.7\"/>\r\n\
  <path d=\"M524.4,642.5c-27,0-47.2,0-47.2,0c-2.1,0-4.1-0.8-5.7-2.4c0,0-20-20-22.9-22.9c-1.6-1.6-3.6-2.4-5.7-2.4c0,0-51,0-55.1,0\"/>\r\n\
  <path d=\"M695.8,551.6c0,2.1-0.8,4.1-2.4,5.7c-1.2,1.2,5.5-5.5-15.4,15.4c-1.6,1.6-3.6,2.4-5.7,2.4l-18.2,0c-2.1,0-4.1,0.8-5.7,2.4C618.9,607,599,627,599,627\"/>\r\n\
  <path d=\"M614.8,611.1c-1.2,1.2,5.5-5.5-15.4,15.4c-1.6,1.6-3.6,2.4-5.7,2.4l-49.3,0c-2.1,0-4.1,0.8-5.7,2.4c-9.5,9.5-3.7,3.7-8.8,8.8c-1.5,1.5-3.5,2.4-5.7,2.4\"/>\r\n\
  <path d=\"M686.9,158.3c0-1.8,1-4.3,2.3-5.6l46.1-46.1\"/>\r\n\
  <path d=\"M883,328.1l0-32c0-1.8-1-4.3-2.3-5.6l-19.4-19.4c-1.3-1.3-3.8-2.3-5.6-2.3h-82.9c-1.8,0-4.3-1-5.6-2.3l-46.8-46.8c-1.3-1.3-3.8-2.3-5.6-2.3h-93.8c-1.8,0-4.3,1-5.6,2.3l-24.1,24.1c-1.3,1.3-3.8,2.3-5.6,2.3h-38.7c-1.8,0-4.3,1-5.6,2.3c-1,1-20.5,20.5-20.5,20.5c-1.3,1.3-3.8,2.3-5.6,2.3c-1.8,0-6.5,0-6.5,0\"/>\r\n\
  <path d=\"M282.1,117.1l0,202.7v1.3c0,1.3,0.7,3,1.6,3.9l0,0v0c0.9,1,2.6,1.2,3.9,1.2l194.6,0c1.8,0,4.3,1,5.6,2.3c1.3,1.3,18,18,18,18\"/>\r\n\
  <path d=\"M721.9,299.7c0-1.8-1-4.3-2.3-5.6l-30.3-30.3c-1.3-1.3-2.3-3.8-2.3-5.6c0-2.8,0-139.8,0-139.8\"/>\r\n\
  <path d=\"M639.2,390.5l23.9-23.9c3.2-3.2,6.5-4.8,10.8-4.8h18.4c1.8,0,4.3-1,5.6-2.3l21.6-21.7c1.3-1.3,2.3-3.8,2.3-5.6c0-2.4,0-7.9,0-32.5c0-1.8,1-4.3,2.3-5.6l34.1-34.1c1.3-1.3,2.3-3.8,2.3-5.6c0-2.8,0-104.7,0-104.7\"/>\r\n\
  <path d=\"M695.8,551.6c0,2.1,0.8,4.1,2.4,5.7c1.2,1.2,6.6,6.6,6.6,6.6c1.6,1.6,2.4,3.6,2.4,5.7l0,4.5\"/>\r\n\
  <path d=\"M695.9,649.1c0,2.1-0.8,4.1-2.4,5.7c-7.8,7.8-21.7,21.7-21.7,21.7\"/>\r\n\
  <path d=\"M695.8,706.4c0-13.6,0-131.5,0-374.9c0-1.8-1-4.3-2.3-5.6l-12.6-12.5c-1.8-1.8-4.3-2.9-7-2.9c-2.2,0-28.7,0-28.7,0\"/>\r\n\
  <path d=\"M935.9,202.6l31.5,31.5c1.3,1.3,3.8,2.3,5.6,2.3c2.5,0,4.2,0,4.2,0\"/>\r\n\
</g>\r\n\
<g id=\"D_L_R\" fill=\"none\" stroke=\"#00A6AA\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M678.6,447.5c-1.8,0-4.3,1-5.6,2.3c-1.7,1.7-12.8,12.8-12.8,12.8\"/>\r\n\
  <path d=\"M840.4,447.5c-1.8,0-4.3-1-5.6-2.3l-0.1-0.1c-1.3-1.3-2.3-3.8-2.3-5.6V311.2c0-1.8-1-4.3-2.3-5.6c-1.8-1.8-12.4-12.5-12.4-12.5c-1.3-1.3-3.8-2.3-5.6-2.3c-2.4,0-16.8,0-16.8,0\"/>\r\n\
  <path d=\"M839.9,447.5c1.8,0,4.3,1,5.6,2.3l44.1,44.1c1.3,1.3,2.3,3.8,2.3,5.6c0,2.2,0,66.3,0,66.3\"/>\r\n\
  <path d=\"M758.7,447.5c1.6,0,4,1,5.3,2.3l4.7,4.7c1.3,1.3,2.3,3.8,2.3,5.6\"/>\r\n\
  <path d=\"M624.1,435.9h34.2c1.8,0,4.3,1,5.6,2.3l7,7c1.3,1.3,3.8,2.3,5.6,2.3h218c1.8,0,4.3,1,5.6,2.3l86,86\"/>\r\n\
  <path d=\"M830,316.5l-56.6,56.6c-1.3,1.3-2.3,3.2-2.3,5V624\"/>\r\n\
</g>\r\n\
<g id=\"W__x26__City\" fill=\"none\" stroke=\"#93CEBD\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M507.7,524.1l42.3,0c1.8,0,4.3-1,5.6-2.3l50-50c1.3-1.3,2.3-3.8,2.3-5.6v-33.5\"/>\r\n\
</g>\r\n\
<g id=\"Bakerloo\" fill=\"none\" stroke=\"#B26300\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M520.8,592.7l-7.8-7.8c-1.3-1.3-2.3-3.8-2.3-5.6V477.1c0-1.8-1-4.3-2.3-5.6L463.8,427c-1.3-1.3-2.3-3.8-2.3-5.6l0-16.6c0-2.2-0.8-4.4-2.3-5.6l-46.1-46.1c-1.3-1.3-3.8-2.3-5.6-2.3c-1.8,0-110.7,0-110.7,0c-1.8,0-4.3-1-5.6-2.3l-10-10c-1.4-1.4-2.2-3.4-2.2-5.5v-3.9c0-1.8,0-4.8,0-6.6V196.5\"/>\r\n\
</g>\r\n\
<g id=\"Jubilee\" fill=\"none\" stroke=\"#A1A5A7\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M331.2,187.1v41.1c0,1.8,1,4.3,2.3,5.6l90.8,90.8c2.3,2.3,3.7,5.4,3.7,8.9v95.5c0,1.8,1,4.3,2.3,5.6l63.5,63.2c1.3,1.3,2.3,3.8,2.3,5.6l0,21c0,4.3,3.5,10.4,7.9,10.4h46.5c1.8,0,4.3-1,5.6-2.3l29.5-29.5c1.3-1.3,3.8-2.3,5.6-2.3c0,0,212.4,0,214.7,0c1.8,0,4.3-1,5.6-2.3l9.4-9.4c1.3-1.3,2.3-2.9,2.3-5.3l0-154.5c0-2.3,1-4,2.3-5.3c1.5-1.5,6.5-6.5,6.5-6.5\"/>\r\n\
</g>\r\n\
<g id=\"Victoria\" fill=\"none\" stroke=\"#0098D8\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M632.8,325.8V271c0-1.8,1-4.3,2.3-5.6l28.3-28.3c1.3-1.3,3.2-2.3,4.8-2.3s100.4,0,100.4,0\"/>\r\n\
  <path d=\"M499.6,650l-56.7-56.7c-1.3-1.3-2.3-3.8-2.3-5.6l0.2-152.3c0-1.8,1-4.3,2.3-5.6l84.5-84.5c1.3-1.3,3.8-2.3,5.6-2.3h82.6\"/>\r\n\
  <path d=\"M605.6,342.9h22c2.8,0,5.1-2.3,5.1-5.1V321\"/>\r\n\
</g>\r\n\
<g id=\"Northern\" fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M520.7,303.5c0-1.8-1-4.3-2.3-5.6c1.3,1.3-3.7-3.7-122.7-122.7\"/>\r\n\
  <path d=\"M553.4,189.3c0-1.8-1-4.3-2.3-5.6c-0.9-0.9,6.3,6.3-7.3-7.3\"/>\r\n\
  <path d=\"M525.6,343.2l0-18.3c0-1.8-1-4.3-2.3-5.6l-0.3-0.3c-1.3-1.3-2.3-3.8-2.3-5.6v-9.8c0-1.8,1-4.3,2.3-5.6l28.1-28.1c1.3-1.3,2.3-3.8,2.3-7V136.2\"/>\r\n\
  <path d=\"M515.8,347.2l0-22.4c0-1.8,1-4.3,2.3-5.6l0.3-0.3c1.3-1.3,2.3-3.8,2.3-5.6v-9.8\"/>\r\n\
  <path d=\"M371.1,740.5l244.8-244.8c1.3-1.3,2.3-3.8,2.3-5.6l0-130.9c0-2.2-0.9-4.2-2.4-5.7c-1.5-1.5-3.5-2.4-5.7-2.4h-76.6c-4.4,0-7.9-3.5-7.9-7.9\"/>\r\n\
  <path d=\"M501.8,609.8c1-1,1.8-3,1.8-4.4l0-239.6c0-1.8,1-4.3,2.3-5.6l7.5-7.5c1.3-1.3,2.3-3.7,2.3-5.5\"/>\r\n\
</g>\r\n\
<g id=\"Piccadilly\" fill=\"none\" stroke=\"#243588\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M161.1,490.2c1.3-1.3,3.8-2.3,5.6-2.3l221.2,0c1.8,0,4.3-1,5.6-2.3l38.4-38.4c1.3-1.3,3.8-2.3,5.6-2.3h54.7c1.8,0,4.3-1,5.6-2.3l32.3-32.3c1.3-1.3,2.3-3.8,2.3-5.6v-36.5c0-1.8,1-4.3,2.3-5.6l117.1-117.1c1.3-1.3,2.3-3.8,2.3-5.6V133.4\"/>\r\n\
  <path d=\"M198.2,487.9c-2.8,0-5.5-1-7.7-3.2l-1.8-1.8c-1-1-1.5-2.1-1.5-3.7V251.6c0-1.8-1.1-4.3-2.3-5.6c0,0-38.3-38.2-39.4-39.3c-1-1-2.7-1.9-4.2-1.9c-2.1,0-77.7,0-77.7,0\"/>\r\n\
  <path d=\"M62.3,607.7v-14.9c0-2.5,1-4.7,2.6-6.3l96.2-96.2\"/>\r\n\
  <path d=\"M97.2,554.2c-1.7,1.7-2.6,4-2.6,6.3v40.5c0,4.9-4,8.8-8.8,8.8h-6.1c-4.9,0-8.8-4-8.8-8.8v-16.7c0-2.5,1-4.7,2.6-6.3l18.2-18.2\"/>\r\n\
</g>\r\n\
<g id=\"Central\" fill=\"none\" stroke=\"#E42313\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M826.3,244.7c0-2.8,2.3-5.1,5.1-5.1h39.2c2.8,0,5.1-2.3,5.1-5.1v-51.2c0-2.8-2.3-5.1-5.1-5.1h-39.2c-2.8,0-5.1,2.3-5.1,5.1\"/>\r\n\
  <path d=\"M116.1,228.8v87.5c0,1.8,1,4.3,2.3,5.6l107.4,107.4c1.3,1.3,3.8,2.3,5.6,2.3\"/>\r\n\
  <path d=\"M826.3,106.8v197.1c0,2.1-0.9,5.4-2.3,6.9l-55.8,55.8c-1.3,1.3-3.8,2.3-5.6,2.3c-1.6,0-85,0-87,0c-1.8,0-4.3,1-5.6,2.3l-58,58c-1.3,1.3-3.8,2.3-5.6,2.3l-31.5,0c-1.8,0-4.3-1-5.6-2.3L553.8,414c-1.3-1.3-3.8-2.3-5.6-2.3H417.9c-1.8,0-4.3,1-5.6,2.3l-15.2,15.2c-1.3,1.3-3.8,2.3-5.6,2.3c-2.1,0-220.7,0-220.7,0\"/>\r\n\
</g>\r\n\
<g id=\"H__x26__C\" fill=\"none\" stroke=\"#F086A4\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M291.9,473.5v-83.7c0-0.8,0.3-2,0.7-3c0.4-1,1-2,1.6-2.6l25-25c2-2,4.6-3,7.3-3l232.2,0c2.8,0,5.4,1.1,7.3,3l38.3,38.3c1.1,1.1,2.5,1.7,4,1.7h50c2.8,0,5.4,1.1,7.3,3l7.6,7.5c1.3,1.3,2.6,2.3,4.8,2.3c2.4,0,3.4-0.9,4.8-2.3l32.3-32.3c1.7-1.7,4.8-3,7.3-3h120.3c0,0,0,0,0,0c1.2,0,3.1-0.8,4-1.6l40.6-40.6\"/>\r\n\
</g>\r\n\
<g id=\"Circle\" fill=\"none\" stroke=\"#FFD300\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M294.3,473.2v-83.4l0,0c0-0.4,0.2-1.3,0.5-2.1l0,0c0.3-0.8,0.8-1.5,1.1-1.8l25-25c1.6-1.6,3.6-2.4,5.7-2.4l-0.2,0l232.4,0c2.2,0,4.2,0.9,5.7,2.4l38.3,38.3c1.5,1.5,3.5,2.4,5.7,2.4h50c2.2,0,4.2,0.9,5.7,2.4c1.5,1.5,2.4,3.5,2.4,5.7l0,30.5c0,2.2-0.9,4.2-2.4,5.7c-1.5,1.5-3.5,2.4-5.7,2.4h-57.8c-2.1,0-4.1,0.8-5.6,2.3L554.5,491c-1.1,1.1-2.5,1.7-4,1.7H360.7c-2.2,0-4.2-0.9-5.7-2.4c-1.6-1.6-2.4-3.6-2.4-5.7l0-111.7c0-2.2,0.9-4.2,2.4-5.7l0.1-0.1c1.6-1.6,3.6-2.4,5.7-2.4c2.2,0,19.3,0,19.3,0\"/>\r\n\
</g>\r\n\
<g id=\"District\" fill=\"none\" stroke=\"#007D32\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M342.3,495.1c2.2,0,4.4-1.1,5.7-2.4c1.3-1.3,2.4-3.5,2.4-5.7V373c0-2.8,1.1-5.4,3-7.3l0.1-0.1c2-2,4.6-3,7.3-3c2.7,0,19.2,0,19.2,0\"/>\r\n\
  <path d=\"M346.1,495.1c-2.2,0-4.2-0.9-5.7-2.4c-1.5-1.5-2.4-3.5-2.4-5.7c0-2.2,0-22,0-22\"/>\r\n\
  <path d=\"M346.1,495.1c-2.2,0-4.2-0.9-5.7-2.4c-1.5-1.5-2.4-3.5-2.4-5.7c0-2.2,0-22,0-22\"/>\r\n\
  <path d=\"M346.1,495.1c-2.2,0-4.2,0.9-5.7,2.4c-1.5,1.5-2.4,3.5-2.4,5.7c0,1.1,0,120.7,0,120.8\"/>\r\n\
  <path d=\"M979.3,243.7L848.4,374.5c-1.3,1.3-3.8,2.3-5.6,2.3H722.6c-1.8,0-4.3,1-5.6,2.3L671.2,425c-1.6,1.6-2.4,3.6-2.4,5.7v9.5c0,2.8-1.1,5.4-3,7.3c-2,2-4.6,3-7.3,3h-57.8c-1.5,0-2.9,0.6-3.9,1.6l-40.5,40.5c-1.5,1.5-3.5,2.4-5.7,2.4H275.3\"/>\r\n\
  <path d=\"M212.1,576.6V503c0-2.2,0.9-4.2,2.3-5.6c1.4-1.4,3.4-2.3,5.6-2.3\"/>\r\n\
  <path d=\"M338.8,495.1h-139c-2.2,0-4.2-0.9-5.7-2.4l-7.8-7.8c-1.5-1.5-2.4-3.5-2.4-5.7l0-32.2c0-2.2-0.9-4.2-2.4-5.7c-1.5-1.5-3.5-2.4-5.7-2.4c-2,0-5.1,0-5.1,0\"/>\r\n\
</g>\r\n\
<g id=\"Metropolitan\" fill=\"none\" stroke=\"#9B0058\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M77.3,130.5c-1.8,0-4.3-1-5.6-2.3l-11.8-11.8\"/>\r\n\
  <path d=\"M61.1,201.5h80.1c2.2,0,4.9,1.3,6.5,2.9l27.7,27.7c1.3,1.3,3.8,2.3,5.6,2.3h65.5\"/>\r\n\
  <path d=\"M664.1,424.6v-15c0-1.5-0.6-2.9-1.7-4c-1.1-1.1-2.5-1.7-4-1.7h-50c-2.8,0-5.4-1.1-7.3-3l-38.3-38.3c-1.1-1.1-2.5-1.7-4-1.7l-113.6,0c-3.3,0-6.4-1.8-8.7-4.1L316.4,236.7c-1.1-1.1-3.8-2.3-5.6-2.3l-82.5,0c-1.8,0-4.3-1-5.6-2.3l-99.2-99.2c-1.3-1.3-3.8-2.3-5.6-2.3H42.3\"/>\r\n\
  <path d=\"M158.5,167.9c-1.3-1.3-2.3-3.8-2.3-5.6l0-4.6l0-23\"/>\r\n\
</g>\r\n\
<g id=\"Air_Line\" fill=\"none\" stroke=\"#DD052B\" stroke-width=\"2\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\r\n\
  <path d=\"M877.1,461.3c0,0-3.8,0-6.3,0c-1.8,0-4.3,1-5.6,2.3l-28.6,28.6c-1.3,1.3-3.8,2.3-5.6,2.3c-2.2,0-4.4,0-4.4,0\"/>\r\n\
  <path stroke=\"#FFFFFF\" stroke-width=\"0.5\" d=\"M877.1,461.3c0,0-3.8,0-6.3,0c-1.8,0-4.3,1-5.6,2.3l-28.6,28.6c-1.3,1.3-3.8,2.3-5.6,2.3c-2.2,0-4.4,0-4.4,0\"/>\r\n\
</g>\r\n\
</svg>\r\n\
";

const size_t Server_DataLength = sizeof(Server_Data);

char* Server_Headers()
{
    char buffer[255] = "\0"; //Null Terminators required only here for strcat
    char* headers = "\0";
    strcat(headers,
"\
HTTP/1.1 200 OK\r\n\
Content-Type: text/html\r\n\
Content-Length: \
");
    itoa(Server_DataLength, buffer, 10);
    strcat(headers, buffer);
    strcat(headers,
"\
\r\n\
Connection: close\r\n\
Refresh: 5\r\n\
\r\n\
");
    return headers;
}

void setup()
{
    Serial.begin(115200);
    Serial.print("[INFO]: ");
    Serial.println("iomap_arduino_tube");
    //Serial.println(Server_ResponseText());
    //Serial.println("[CKPT]");
    //Ethernet.begin(MAC, IP);
    Ethernet.begin(MAC);
    Server.begin();
    OneShot = true;
}

void loop()
{
    status = Ethernet.maintain() + (OneShot ? Server_InitSuccess : 0);
    switch (status)
    {
        case (Server_InitSuccess): OneShot = false;
        case (Server_RenewSuccess):
        case (Server_RebindSuccess):
        {
            Serial.print("[INFO]: ");
            Serial.print("Server: ");
            Serial.print(Server_localIP());
            Serial.print(":");
            Serial.println(Server_localPort());
        }
        break;
        case (Server_RenewError):
        case (Server_RebindError):
        {
            Serial.print("[WARN]: ");
            Serial.print("Server: ");
            Serial.println("Error");
        }
        break;
        case (Server_Idle):
        default:
        {
            //Serial.println(status);
        }
        break;
    }
    
    EthernetClient Client = Server.available();
    if (Client)
    {
        BlankLine = true;
        Serial.print("[INFO]: ");
        Serial.print("Client: ");
        Serial.print(Server_remoteIP());
        Serial.print(":");
        Serial.println(Server_remotePort());
        while (Client.connected())
        {
            if (Client.available())
            {
                TempChar = Client.read();
                if ((TempChar == '\n') && (BlankLine))
                {
                    Client.println(Server_Headers());
                    for (size_t i = 0; i < Server_DataLength; ++i)
                    {
                        Client.print((char)pgm_read_byte(&(Server_Data[i])));
                    }
                    break;
                }
                if (TempChar == '\n') { BlankLine = true; }
                else if (TempChar != '\r') { BlankLine = false; }
            }
        }
        delay(10);
        Client.stop();
    }
}
